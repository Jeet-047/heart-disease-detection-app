<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart Disease Predictor</title>
    <link rel="icon" href="/static/images/favicon.svg" type="image/png">
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #000000 0%, #0f2027 20%, #203a43 40%, #2c5364 60%, #a8edea 100%);
        }
        .form-container {
            background-color: white;
            padding: 1.5rem;
            border-radius: 1.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            max-width: 42rem;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }
        .step-container {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            opacity: 0;
            transform: translateY(10px);
        }
        .step-container.active {
            opacity: 1;
            transform: translateY(0);
        }
        .attribute-description {
            font-size: 0.875rem;
            line-height: 1.25rem;
            color: #4b5563;
            font-weight: 500;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
            text-align: left; /* Aligned text to the left */
        }
        /* Mobile-first adjustments for text and spacing */
        h1 {
            font-size: 1.5rem;
            line-height: 2rem;
            font-weight: 800;
            text-align: center;
            color: #1f2937;
            margin-bottom: 1rem;
        }
        p {
            font-size: 0.875rem;
            line-height: 1.25rem;
            text-align: center;
            color: #4b5563;
            margin-bottom: 1.5rem;
        }
        label {
            font-size: 1.125rem;
            line-height: 1.75rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        input, select {
            font-size: 0.875rem;
            line-height: 1.25rem;
        }
        @media (min-width: 640px) {
            .form-container {
                padding: 2rem 2.5rem;
            }
            .attribute-description {
                font-size: 1rem;
                line-height: 1.5rem;
            }
            h1 {
                font-size: 1.875rem;
                line-height: 2.25rem;
                margin-bottom: 1rem;
            }
            p {
                font-size: 1rem;
                line-height: 1.5rem;
                margin-bottom: 2rem;
            }
            label {
                font-size: 1.25rem;
                line-height: 1.75rem;
            }
        }
        @media (min-width: 768px) {
            h1 {
                font-size: 2.25rem;
                line-height: 2.5rem;
            }
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="form-container">
        <!-- Back Button to Home -->
        <div class="flex justify-start mb-4">
            <a href="/" class="flex items-center space-x-2 text-sm text-gray-600 hover:text-blue-600 transition duration-150 ease-in-out font-semibold">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
                <span>Back to Home</span>
            </a>
        </div>

        <h1 class="text-3xl md:text-4xl font-extrabold text-center text-gray-800 mb-4">Heart Disease Predictor</h1>
        <p class="text-center text-gray-600 mb-8">
            Let's check your heart health. Please fill out the form step by step.
        </p>

        <!-- Progress Indicator -->
        <div class="flex justify-center items-center space-x-2 mb-8">
            <div id="progress-indicator" class="flex-grow h-1 bg-gray-300 rounded-full">
                <div id="progress-bar" class="h-full bg-blue-500 rounded-full transition-all duration-300" style="width: 0%;"></div>
            </div>
            <span id="step-counter" class="text-sm font-medium text-gray-500">1 of 9</span>
        </div>

        <form id="prediction-form" class="space-y-8" action="/predict" method="post">

            <!-- Step Containers -->
            <div id="step-0" class="step-container active">
                <div class="bg-gray-50 p-6 rounded-xl shadow-inner">
                    <label for="patient_name" class="block text-xl font-semibold text-gray-700 mb-2">
                        Patient Name
                    </label>
                    <p class="attribute-description mt-2 mb-4">
                        Please enter your full name for the report.
                    </p>
                    <input type="text" id="patient_name" name="patient_name" required
                        class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                        placeholder="e.g., Jeet Majumder" oninput="this.value = this.value.replace(/[^a-zA-Z\s]/g, '');">
                    
                </div>
            </div>

            <div id="step-1" class="step-container hidden">
                <div class="bg-gray-50 p-6 rounded-xl shadow-inner">
                    <label for="age" class="block text-xl font-semibold text-gray-700 mb-2">
                        Age
                    </label>
                    <p class="attribute-description mt-2 mb-4">
                        Your age is a crucial factor in heart health.
                    </p>
                    <input type="number" id="age" name="age" required min="1" max="120"
                        class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                        placeholder="e.g., 52">
                </div>
            </div>

            <div id="step-2" class="step-container hidden">
                <div class="bg-gray-50 p-6 rounded-xl shadow-inner">
                    <label for="cp" class="block text-xl font-semibold text-gray-700 mb-2">
                        Chest Pain Type (cp)
                    </label>
                    <p class="attribute-description mt-2 mb-4">
                        Chest pain types can indicate different heart conditions. Please select the option that best describes your chest pain.
                        <br><br>
                        <strong>0:</strong> Typical angina - Pain during activity, gets better with rest.
                        <br>
                        <strong>1:</strong> Atypical angina - Pain not clearly linked to activity.
                        <br>
                        <strong>2:</strong> Non-anginal pain - Pain not caused by heart issues.
                        <br>
                        <strong>3:</strong> Asymptomatic - No chest pain at all.
                    </p>
                    <select id="cp" name="cp" required
                        class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                        <option value="" disabled selected>Select an option</option>
                        <option value="0">0: Typical angina</option>
                        <option value="1">1: Atypical angina</option>
                        <option value="2">2: Non-anginal pain</option>
                        <option value="3">3: Asymptomatic</option>
                    </select>
                </div>
            </div>

            <div id="step-3" class="step-container hidden">
                <div class="bg-gray-50 p-6 rounded-xl shadow-inner">
                    <label for="trestbps" class="block text-xl font-semibold text-gray-700 mb-2">
                        Resting Blood Pressure (trestbps)
                    </label>
                    <p class="attribute-description mt-2 mb-4">
                        This is your blood pressure at rest.
                        <br><br>
                        <span class="font-bold text-green-700 block mt-2">Normal Range:</span> 90â€“119 mm Hg
                        <br>
                        <span class="font-bold text-red-700 block mt-2">Abnormal:</span> Below 90 or 120 mm Hg and above.
                    </p>
                    <input type="number" id="trestbps" name="trestbps" required min="70" max="200"
                        class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                        placeholder="e.g., 120">
                </div>
            </div>

            <div id="step-4" class="step-container hidden">
                <div class="bg-gray-50 p-6 rounded-xl shadow-inner">
                    <label for="chol" class="block text-xl font-semibold text-gray-700 mb-2">
                        Cholesterol (chol)
                    </label>
                    <p class="attribute-description mt-2 mb-4">
                        High cholesterol can increase the risk of heart disease.
                        <br><br>
                        <span class="font-bold text-green-700 block mt-2">Normal Range:</span> Less than 200 mg/dL
                        <br>
                        <span class="font-bold text-red-700 block mt-2">Abnormal:</span> 200 mg/dL or more.
                    </p>
                    <input type="number" id="chol" name="chol" required min="100" max="600"
                        class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                        placeholder="e.g., 200">
                </div>
            </div>

            <div id="step-5" class="step-container hidden">
                <div class="bg-gray-50 p-6 rounded-xl shadow-inner">
                    <label for="thalach" class="block text-xl font-semibold text-gray-700 mb-2">
                        Maximum Heart Rate Achieved (thalach)
                    </label>
                    <p class="attribute-description mt-2 mb-4">
                        This is the highest heart rate you reached during exercise.
                        <br><br>
                        <span class="font-bold text-green-700 block mt-2">Normal:</span> Achieved maximum heart rate close to (220 - age).
                        <br>
                        <span class="font-bold text-red-700 block mt-2">Abnormal:</span> Much lower than expected.
                    </p>
                    <input type="number" id="thalach" name="thalach" required min="60" max="220"
                        class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                        placeholder="e.g., 150">
                </div>
            </div>

            <div id="step-6" class="step-container hidden">
                <div class="bg-gray-50 p-6 rounded-xl shadow-inner">
                    <label for="oldpeak" class="block text-xl font-semibold text-gray-700 mb-2">
                        Oldpeak
                    </label>
                    <p class="attribute-description mt-2 mb-4">
                        This is the drop in the heart's ECG signal during exercise.
                        <br><br>
                        <span class="font-bold text-green-700 block mt-2">Normal:</span> 0 (No drop).
                        <br>
                        <span class="font-bold text-red-700 block mt-2">Abnormal:</span> A value greater than 0.
                    </p>
                    <input type="number" step="0.1" id="oldpeak" name="oldpeak" required min="0" max="7"
                        class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                        placeholder="e.g., 1.5">
                </div>
            </div>

            <div id="step-7" class="step-container hidden">
                <div class="bg-gray-50 p-6 rounded-xl shadow-inner">
                    <label for="ca" class="block text-xl font-semibold text-gray-700 mb-2">
                        Number of Major Vessels (ca)
                    </label>
                    <p class="attribute-description mt-2 mb-4">
                        This indicates how many major blood vessels are blocked.
                        <br><br>
                        <span class="font-bold text-green-700 block mt-2">Normal:</span> 0 (Vessels are clear).
                        <br>
                        <span class="font-bold text-red-700 block mt-2">Abnormal:</span> 1, 2, or 3 (Some vessels are blocked).
                    </p>
                    <select id="ca" name="ca" required
                        class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                        <option value="" disabled selected>Select the number of blocked vessels</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                    </select>
                </div>
            </div>

            <div id="step-8" class="step-container hidden">
                <div class="bg-gray-50 p-6 rounded-xl shadow-inner">
                    <label for="thal" class="block text-xl font-semibold text-gray-700 mb-2">
                        Thalassemia (thal)
                    </label>
                    <p class="attribute-description mt-2 mb-4">
                        Thalassemia is a blood disorder that affects blood flow to the heart.
                        <br><br>
                        <span class="font-bold text-green-700 block mt-2">Normal:</span> 0 (Blood flows normally).
                        <br>
                        <span class="font-bold text-red-700 block mt-2">Abnormal:</span> 1, 2, or 3.
                    </p>
                    <select id="thal" name="thal" required
                        class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                        <option value="" disabled selected>Select a thalassemia type</option>
                        <option value="0">0: Normal</option>
                        <option value="1">1: Fixed problem</option>
                        <option value="2">2: Reversible problem</option>
                        <option value="3">3: Other problem</option>
                    </select>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex justify-between mt-8">
                <button type="button" id="prev-btn"
                    class="bg-gray-400 text-white font-semibold py-2 px-6 rounded-lg shadow-md hover:bg-gray-500 transition duration-150 ease-in-out hidden">
                    Previous
                </button>
                <button type="button" id="next-btn"
                    class="bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg shadow-lg hover:bg-blue-700 transition duration-150 ease-in-out">
                    Next
                </button>
                <button type="submit" id="submit-btn"
                    class="bg-green-600 text-white font-semibold py-2 px-6 rounded-lg shadow-lg hover:bg-green-700 transition duration-150 ease-in-out hidden">
                    Predict
                </button>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('prediction-form');
            const steps = document.querySelectorAll('.step-container');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const submitBtn = document.getElementById('submit-btn');
            const progressBar = document.getElementById('progress-bar');
            const stepCounter = document.getElementById('step-counter');
            let currentStep = 0;
            const totalSteps = steps.length;

            const updateUI = () => {
                steps.forEach((step, index) => {
                    if (index === currentStep) {
                        step.classList.remove('hidden');
                        setTimeout(() => step.classList.add('active'), 10);
                    } else {
                        step.classList.add('hidden');
                        step.classList.remove('active');
                    }
                });

                // Update button visibility
                prevBtn.classList.toggle('hidden', currentStep === 0);
                nextBtn.classList.toggle('hidden', currentStep === totalSteps - 1);
                submitBtn.classList.toggle('hidden', currentStep !== totalSteps - 1);

                // Update progress bar
                const progress = (currentStep + 1) / totalSteps * 100;
                progressBar.style.width = `${progress}%`;

                // Update step counter
                stepCounter.textContent = `${currentStep + 1} of ${totalSteps}`;
            };

            nextBtn.addEventListener('click', () => {
                // Get the current step's inputs
                const currentStepInputs = steps[currentStep].querySelectorAll('input, select');
                let allValid = true;
                
                // Check if all inputs in the current step are valid
                for (const input of currentStepInputs) {
                    if (!input.reportValidity()) {
                        allValid = false;
                        break;
                    }
                }

                if (allValid) {
                    currentStep++;
                    updateUI();
                }
            });

            prevBtn.addEventListener('click', () => {
                currentStep--;
                updateUI();
            });

            updateUI();
        });
    </script>
</body>
</html>
